{"ast":null,"code":"var _jsxFileName = \"D:\\\\CodePractice\\\\TodoList\\\\frontend\\\\demo-app\\\\src\\\\TodoList.js\";\nimport React, { Component, useEffect, useState, Fragment } from 'react';\nimport ListItem from './ListItem';\nimport Dialog from './Dialog';\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\nimport './main.css';\n\nclass TodoList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleLoadTask = () => {\n      getTodos().then(response => {\n        this.state.list = response;\n      }).catch(error => {\n        this.error = \"无法获得任务\";\n      });\n    };\n\n    this.handleAddTask = newitem => {\n      var allTask = this.state.list;\n      addTodo(newitem).then(() => {\n        allTask.push(newitem);\n        this.setState({\n          list: allTask\n        });\n      });\n    };\n\n    document.title = \"TodoList\";\n    this.state = {\n      list: [{\n        id: 0,\n        content: '找个日常实习'\n      }, {\n        id: 1,\n        content: '待到明年1月'\n      }, {\n        id: 2,\n        content: '再来看看春招'\n      }],\n      finished: 0\n    };\n    this.error = \"\";\n  }\n\n  addTask(newitem) {\n    var allTask = this.state.list;\n    allTask.push(newitem);\n    this.setState({\n      list: allTask\n    });\n  }\n\n  updateFinished(todoItem) {\n    var sum = 0;\n    this.state.list.forEach(item => {\n      if (item.id === todoItem.id) {\n        item.status = todoItem.status;\n        item.name = todoItem.name;\n      }\n\n      if (item.status === 1) {\n        sum++;\n      }\n    });\n    this.setState({\n      finished: sum\n    });\n  }\n\n  updateTotal(todoItem) {\n    var obj = [],\n        sum = 0;\n    this.state.list.forEach(item => {\n      if (item.id !== todoItem.id) {\n        obj.push(item);\n\n        if (item.status === 1) {\n          sum++;\n        }\n      }\n    });\n    this.setState({\n      list: obj,\n      finished: sum\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }\n    }, \"TodoList\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"task-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }\n    }, this.state.list.map((item, index) => /*#__PURE__*/React.createElement(ListItem, {\n      item: item //finishedChange={this.updateFinished.bind(this)}\n      ,\n      totalChange: this.updateTotal.bind(this),\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(Dialog, {\n      addNewTask: this.addTask.bind(this),\n      nums: this.state.list.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}\n\nexport default TodoList;","map":{"version":3,"sources":["D:/CodePractice/TodoList/frontend/demo-app/src/TodoList.js"],"names":["React","Component","useEffect","useState","Fragment","ListItem","Dialog","getTodos","addTodo","deleteTodo","updateTodo","TodoList","constructor","props","handleLoadTask","then","response","state","list","catch","error","handleAddTask","newitem","allTask","push","setState","document","title","id","content","finished","addTask","updateFinished","todoItem","sum","forEach","item","status","name","updateTotal","obj","render","map","index","bind","length"],"mappings":"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","sourcesContent":["import React, { Component ,useEffect,useState,Fragment} from 'react';\r\nimport ListItem from './ListItem';\r\nimport Dialog from './Dialog';\r\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\r\nimport './main.css';\r\n\r\nclass TodoList extends Component {\r\n\r\n\tconstructor (props) {\r\n\t\tsuper(props);\r\n\t\tdocument.title=\"TodoList\";\r\n\t\tthis.state = {\r\n\t\t\tlist: [{\r\n\t\t\t\tid: 0,\r\n\t\t\t\tcontent: '找个日常实习',\r\n\t\t\t}, {\r\n\t\t\t\tid: 1,\r\n\t\t\t\tcontent: '待到明年1月',\r\n\t\t\t}, {\r\n\t\t\t\tid: 2,\r\n\t\t\t\tcontent: '再来看看春招',\r\n\t\t\t}],\r\n\t\t\tfinished: 0\r\n\t\t};\r\n\t\tthis.error=\"\";\r\n\t}\r\n\r\n\thandleLoadTask=()=>{\r\n\t\tgetTodos().then((response) =>{\r\n\t\t\tthis.state.list=response;\r\n\t\t}).catch((error)=>{\r\n\t\t\tthis.error=\"无法获得任务\";\r\n\t\t})\r\n\t};\r\n\r\n\thandleAddTask=(newitem)=>{\r\n\t\tvar allTask = this.state.list;\r\n\r\n\t\taddTodo(newitem).then(() => {\r\n\t\t\tallTask.push(newitem);\r\n\t\t\tthis.setState({\r\n\t\t\t\tlist: allTask\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\r\n\r\n\taddTask (newitem) {\r\n\t\tvar allTask = this.state.list;\r\n\t\tallTask.push(newitem);\r\n\t\tthis.setState({\r\n\t\t\tlist: allTask\r\n\t\t});\r\n\t}\r\n\r\n\tupdateFinished (todoItem) {\r\n\t\tvar sum = 0;\r\n\t\tthis.state.list.forEach( (item) => {\r\n\t\t\tif (item.id === todoItem.id) {\r\n\t\t\t\titem.status = todoItem.status;\r\n\t\t\t\titem.name=todoItem.name;\r\n\t\t\t}\r\n\t\t\tif (item.status === 1) {\r\n\t\t\t\tsum++;\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tfinished: sum\r\n\t\t});\r\n\t}\r\n\r\n\tupdateTotal (todoItem) {\r\n\t\tvar obj = [], sum = 0;\r\n\t\tthis.state.list.forEach((item) => {\r\n\t\t\tif (item.id !== todoItem.id) {\r\n\t\t\t\tobj.push(item);\r\n\t\t\t\tif (item.status === 1 ) {\r\n\t\t\t\t\tsum++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.setState({\r\n\t\t\tlist: obj,\r\n\t\t\tfinished: sum\r\n\t\t});\r\n\t}\r\n\r\n\trender () {\r\n\t\treturn (\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<h1>TodoList</h1>\r\n\t\t\t\t<ul className=\"task-items\">\r\n\t\t\t\t\t{ this.state.list.map ((item, index) =>\r\n\t\t\t\t\t\t<ListItem \r\n\t\t\t\t\t\t\titem={item}  \r\n\t\t\t\t\t\t\t//finishedChange={this.updateFinished.bind(this)}\r\n\t\t\t\t\t\t\ttotalChange={this.updateTotal.bind(this)}\r\n\t\t\t\t\t\t\tkey={index}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</ul>\r\n\t\t\t\t<Dialog addNewTask={this.addTask.bind(this)} nums={this.state.list.length}/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}