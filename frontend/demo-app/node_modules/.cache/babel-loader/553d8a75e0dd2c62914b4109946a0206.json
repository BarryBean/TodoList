{"ast":null,"code":"var _jsxFileName = \"D:\\\\CodePractice\\\\TodoList\\\\frontend\\\\demo-app\\\\src\\\\TodoList.js\";\nimport React, { Component, useEffect, useState, Fragment } from 'react';\nimport ListItem from './ListItem';\nimport Dialog from './Dialog';\nimport { getTodos, addTodo, deleteTodo, updateTodo } from \"./api/TodoApi\";\nimport './main.css';\n\nclass TodoList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleLoadTask = () => {\n      getTodos().then(response => {\n        this.state.list = response;\n      }).catch(error => {\n        this.error = \"无法获得任务\";\n      });\n    };\n\n    this.handleAddTask = newitem => {\n      var allTask = this.state.list;\n      addTodo(newitem).then(() => {\n        allTask.push(newitem);\n        this.setState({\n          list: allTask\n        });\n      });\n    };\n\n    document.title = \"TodoList\";\n    this.state = {\n      list: [{\n        id: 0,\n        content: '找个日常实习'\n      }, {\n        id: 1,\n        content: '待到明年1月'\n      }, {\n        id: 2,\n        content: '再来看看春招'\n      }],\n      finished: 0\n    };\n    this.error = \"\";\n  }\n\n  addTask(newitem) {\n    var allTask = this.state.list;\n    allTask.push(newitem);\n    this.setState({\n      list: allTask\n    });\n  }\n\n  updateFinished(todoItem) {\n    var sum = 0;\n    this.state.list.forEach(item => {\n      if (item.id === todoItem.id) {\n        item.content = todoItem.content;\n      }\n\n      sum++;\n    });\n    this.setState({\n      finished: sum\n    });\n  }\n\n  updateTotal(todoItem) {\n    var obj = [],\n        sum = 0;\n    this.state.list.forEach(item => {\n      if (item.id !== todoItem.id) {\n        obj.push(item);\n        sum++;\n      }\n    });\n    this.setState({\n      list: obj,\n      finished: sum\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, \"TodoList\"), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"task-items\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, this.state.list.map((item, index) => /*#__PURE__*/React.createElement(ListItem, {\n      item: item,\n      finishedChange: this.updateFinished.bind(this),\n      totalChange: this.updateTotal.bind(this),\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Dialog, {\n      addNewTask: this.addTask.bind(this),\n      nums: this.state.list.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default TodoList;","map":{"version":3,"sources":["D:/CodePractice/TodoList/frontend/demo-app/src/TodoList.js"],"names":["React","Component","useEffect","useState","Fragment","ListItem","Dialog","getTodos","addTodo","deleteTodo","updateTodo","TodoList","constructor","props","handleLoadTask","then","response","state","list","catch","error","handleAddTask","newitem","allTask","push","setState","document","title","id","content","finished","addTask","updateFinished","todoItem","sum","forEach","item","updateTotal","obj","render","map","index","bind","length"],"mappings":"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","sourcesContent":["import React, {Component, useEffect, useState, Fragment} from 'react';\r\nimport ListItem from './ListItem';\r\nimport Dialog from './Dialog';\r\nimport {getTodos, addTodo, deleteTodo, updateTodo} from \"./api/TodoApi\";\r\nimport './main.css';\r\n\r\nclass TodoList extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        document.title = \"TodoList\";\r\n        this.state = {\r\n            list: [{\r\n                id: 0,\r\n                content: '找个日常实习',\r\n            }, {\r\n                id: 1,\r\n                content: '待到明年1月',\r\n            }, {\r\n                id: 2,\r\n                content: '再来看看春招',\r\n            }],\r\n            finished: 0\r\n        };\r\n        this.error = \"\";\r\n    }\r\n\r\n    handleLoadTask = () => {\r\n        getTodos().then((response) => {\r\n            this.state.list = response;\r\n        }).catch((error) => {\r\n            this.error = \"无法获得任务\";\r\n        })\r\n    };\r\n\r\n    handleAddTask = (newitem) => {\r\n        var allTask = this.state.list;\r\n\r\n        addTodo(newitem).then(() => {\r\n            allTask.push(newitem);\r\n            this.setState({\r\n                list: allTask\r\n            });\r\n        });\r\n    };\r\n\r\n\r\n    addTask(newitem) {\r\n        var allTask = this.state.list;\r\n        allTask.push(newitem);\r\n        this.setState({\r\n            list: allTask\r\n        });\r\n    }\r\n\r\n    updateFinished(todoItem) {\r\n        var sum = 0;\r\n        this.state.list.forEach((item) => {\r\n            if (item.id === todoItem.id) {\r\n                item.content = todoItem.content;\r\n            }\r\n            sum++;\r\n        });\r\n        this.setState({\r\n            finished: sum\r\n        });\r\n    }\r\n\r\n    updateTotal(todoItem) {\r\n        var obj = [], sum = 0;\r\n        this.state.list.forEach((item) => {\r\n            if (item.id !== todoItem.id) {\r\n                obj.push(item);\r\n                sum++;\r\n            }\r\n        });\r\n        this.setState({\r\n            list: obj,\r\n            finished: sum\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <h1>TodoList</h1>\r\n                <ul className=\"task-items\">\r\n                    {this.state.list.map((item, index) =>\r\n                        <ListItem\r\n                            item={item}\r\n                            finishedChange={this.updateFinished.bind(this)}\r\n                            totalChange={this.updateTotal.bind(this)}\r\n                            key={index}\r\n                        />\r\n                    )}\r\n                </ul>\r\n                <Dialog addNewTask={this.addTask.bind(this)} nums={this.state.list.length}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default TodoList;"]},"metadata":{},"sourceType":"module"}